@TaskMasterPro_Api_HostAddress_Http = http://localhost:5266
@TaskMasterPro_Api_HostAddress_Https = https://localhost:7058
@TaskMasterPro_Api_HostAddress_Docker = http://localhost:5001

### Variables
@baseUrl = {{TaskMasterPro_Api_HostAddress_Http}}/api
@testUserId = user-{{$randomInt}}
@testProjectId = {{$guid}}

### Test Tenant IDs (from seeded data)
@acmeTenantId = 11111111-1111-1111-1111-111111111111
@techInnovationsTenantId = 22222222-2222-2222-2222-222222222222
@acmeUserId = 11111111-1111-1111-1111-111111111112
@techUserId = 22222222-2222-2222-2222-222222222222

### Authentication Tokens
### Create JWT tokens with different roles and tenant access:

### System Admin Token (can access all tenants) (domain: admin.taskmasterpro.com)
### dotnet user-jwts create --scope "taskmasterpro-api" --claim "role=SystemAdmin" --claim "tenant_id=11111111-1111-1111-1111-111111111111" --claim "name=System Admin" --claim "email=admin@system.com" --name "SystemAdmin" --project "demo/TaskMasterPro.Api"
@systemAdminJwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IlN5c3RlbUFkbWluIiwic3ViIjoiU3lzdGVtQWRtaW4iLCJqdGkiOiIzMGNlMGQ0Iiwic2NvcGUiOiJ0YXNrbWFzdGVycHJvLWFwaSIsInJvbGUiOiJTeXN0ZW1BZG1pbiIsInRlbmFudF9pZCI6IjExMTExMTExLTExMTEtMTExMS0xMTExLTExMTExMTExMTExMSIsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJlbWFpbCI6ImFkbWluQHN5c3RlbS5jb20iLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MjY2IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzA1OCJdLCJuYmYiOjE3NTUzNTgxODksImV4cCI6MTc2MzMwNjk4OSwiaWF0IjoxNzU1MzU4MTkwLCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.FMsR_g1Add8wrL2X1IJtMwRqMBYwk7sKSLqPjvHqno4

### Regular User Token - Acme Corporation (domain: acme.taskmasterpro.com)
### dotnet user-jwts create --scope "taskmasterpro-api" --scope "read" --claim "role=Member" --claim "tenant_id=11111111-1111-1111-1111-111111111111" --claim "name=John Doe" --claim "email=john.doe@acme.com" --name "AcmeUser" --project "demo/TaskMasterPro.Api"
@acmeUserJwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IkFjbWVVc2VyIiwic3ViIjoiQWNtZVVzZXIiLCJqdGkiOiI3OWU0NmQwMiIsInNjb3BlIjpbInRhc2ttYXN0ZXJwcm8tYXBpIiwicmVhZCJdLCJyb2xlIjoiTWVtYmVyIiwidGVuYW50X2lkIjoiMTExMTExMTEtMTExMS0xMTExLTExMTEtMTExMTExMTExMTExIiwibmFtZSI6IkpvaG4gRG9lIiwiZW1haWwiOiJqb2huLmRvZUBhY21lLmNvbSIsImF1ZCI6WyJodHRwOi8vbG9jYWxob3N0OjUyNjYiLCJodHRwczovL2xvY2FsaG9zdDo3MDU4Il0sIm5iZiI6MTc1NTQwMDkxNywiZXhwIjoxNzYzMzQ5NzE3LCJpYXQiOjE3NTU0MDA5MTgsImlzcyI6ImRvdG5ldC11c2VyLWp3dHMifQ.Twf83GDETZMNogkJESYYjY7fBFDaK2ymk5c8QQWNXHg

### Project Manager Token - Acme Corporation  (domain: acme.taskmasterpro.com)
### dotnet user-jwts create --scope "taskmasterpro-api" --scope "read" --scope "write" --claim "role=ProjectManager" --claim "tenant_id=11111111-1111-1111-1111-111111111111" --claim "name=Jane Smith" --claim "email=jane.smith@acme.com" --name "AcmeProjectManager" --project "demo/TaskMasterPro.Api"
@acmeProjectManagerJwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IkFjbWVQcm9qZWN0TWFuYWdlciIsInN1YiI6IkFjbWVQcm9qZWN0TWFuYWdlciIsImp0aSI6IjM2ZWRiYTE1Iiwic2NvcGUiOlsidGFza21hc3RlcnByby1hcGkiLCJyZWFkIiwid3JpdGUiXSwicm9sZSI6IlByb2plY3RNYW5hZ2VyIiwidGVuYW50X2lkIjoiMTExMTExMTEtMTExMS0xMTExLTExMTEtMTExMTExMTExMTExIiwibmFtZSI6IkphbmUgU21pdGgiLCJlbWFpbCI6ImphbmUuc21pdGhAYWNtZS5jb20iLCJhdWQiOlsiaHR0cDovL2xvY2FsaG9zdDo1MjY2IiwiaHR0cHM6Ly9sb2NhbGhvc3Q6NzA1OCJdLCJuYmYiOjE3NTU0MDA4NTYsImV4cCI6MTc2MzM0OTY1NiwiaWF0IjoxNzU1NDAwODU3LCJpc3MiOiJkb3RuZXQtdXNlci1qd3RzIn0.1zL6fFaScFi8VU52l7wsYUkiyrxGsyM3zHhMldbH_G8

### Regular User Token - Tech Innovations (domain: techinnovations.taskmasterpro.com)
### dotnet user-jwts create --scope "taskmasterpro-api" --scope "read" --claim "role=Member" --claim "tenant_id=22222222-2222-2222-2222-222222222222" --claim "name=Bob Wilson" --claim "email=bob.wilson@techinnovations.com" --name "TechUser" --project "demo/TaskMasterPro.Api"
@techUserJwt = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IlRlY2hVc2VyIiwic3ViIjoiVGVjaFVzZXIiLCJqdGkiOiI4MzRjMDQ3NiIsInNjb3BlIjpbInRhc2ttYXN0ZXJwcm8tYXBpIiwicmVhZCJdLCJyb2xlIjoiTWVtYmVyIiwidGVuYW50X2lkIjoiMjIyMjIyMjItMjIyMi0yMjIyLTIyMjItMjIyMjIyMjIyMjIyIiwibmFtZSI6IkJvYiBXaWxzb24iLCJlbWFpbCI6ImJvYi53aWxzb25AdGVjaGlubm92YXRpb25zLmNvbSIsImF1ZCI6WyJodHRwOi8vbG9jYWxob3N0OjUyNjYiLCJodHRwczovL2xvY2FsaG9zdDo3MDU4Il0sIm5iZiI6MTc1NTQwMDc4OCwiZXhwIjoxNzYzMzQ5NTg4LCJpYXQiOjE3NTU0MDA3ODgsImlzcyI6ImRvdG5ldC11c2VyLWp3dHMifQ.QGRqyo9Jrt1hgr2R-d69L1Z1akyRz3r3uO-XY3BOSjw

### Invalid/Expired Token for negative testing (domain: admin.taskmasterpro.com)
@invalidJwt = eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJpbnZhbGlkIn0.invalid

@TaskMasterPro_Api_HostAddress_Http = http://localhost:5266
@baseUrl = {{TaskMasterPro_Api_HostAddress_Http}}/api


### =================================================================
### 🛡️ TASK ENDPOINTS - TENANT ISOLATION TESTS
### =================================================================

### 1. GET MY TASKS - PASS: Acme user sees only their assigned tasks
# Expected: 200 OK
# Response: All tasks should have tenantId = "11111111-1111-1111-1111-111111111111"
GET {{baseUrl}}/tasks/my-tasks
Authorization: Bearer {{acmeUserJwt}}
Host: acme.taskmasterpro.com

### 2. GET MY TASKS - PASS: Tech user sees only their assigned tasks
# Expected: 200 OK
# Response: All tasks should have tenantId = "22222222-2222-2222-2222-222222222222"
GET {{baseUrl}}/tasks/my-tasks
Authorization: Bearer {{techUserJwt}}
Host: techinnovations.taskmasterpro.com

### 3. GET MY TASKS - FAIL: Unauthenticated access
# Expected: 401 Unauthorized
GET {{baseUrl}}/tasks/my-tasks
Host: acme.taskmasterpro.com

### 4. GET OVERDUE TASKS - PASS: Acme user sees only their tenant's overdue tasks
# Expected: 200 OK
# Response: All tasks should have tenantId = "11111111-1111-1111-1111-111111111111"
GET {{baseUrl}}/tasks/overdue
Authorization: Bearer {{acmeUserJwt}}
Host: acme.taskmasterpro.com

### 5. GET OVERDUE TASKS - PASS: Tech user sees only their tenant's overdue tasks
# Expected: 200 OK
# Response: All tasks should have tenantId = "22222222-2222-2222-2222-222222222222"
GET {{baseUrl}}/tasks/overdue
Authorization: Bearer {{techUserJwt}}
Host: techinnovations.taskmasterpro.com

### 6. GET PROJECT TASKS - PASS: Acme user accesses their project's tasks
# Expected: 200 OK
# Response: All tasks should have tenantId = "11111111-1111-1111-1111-111111111111"
GET {{baseUrl}}/tasks/project/{{testProjectId}}
Authorization: Bearer {{acmeUserJwt}}
Host: acme.taskmasterpro.com

### 7. GET PROJECT TASKS - FAIL: Tech user cannot access Acme project tasks
# Expected: 200 OK (but empty array - project doesn't exist in their tenant)
# Response: Empty array or tasks from different project in Tech tenant
GET {{baseUrl}}/tasks/project/{{testProjectId}}
Authorization: Bearer {{techUserJwt}}
Host: techinnovations.taskmasterpro.com

### 8. GET PROJECT TASKS - FAIL: Invalid project ID format
# Expected: 400 Bad Request
GET {{baseUrl}}/tasks/project/invalid-guid
Authorization: Bearer {{acmeUserJwt}}
Host: acme.taskmasterpro.com

### 9. GET PROJECT TASKS - FAIL: Unauthenticated access
# Expected: 401 Unauthorized
GET {{baseUrl}}/tasks/project/{{testProjectId}}
Host: acme.taskmasterpro.com


